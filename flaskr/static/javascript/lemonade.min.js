/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/lemonadejs@4.2.2/dist/lemonade.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.lemonade=t()}(this,(function(){"use strict";let e={queue:[],container:{},tracking:new Map,components:{}};"undefined"!=typeof document&&(document.lemonadejs?e=document.lemonadejs:document.lemonadejs=e);let t=/{{(.*?)}}/g;const n=function(e,t){try{let n=e.toString().replace(/[\[\]]/g,".").split(".");"self"===n[0]&&n.shift(),n=n.filter((e=>""!==e));let l,o=this;for(;n.length;){let e=n.shift();if(t&&("object"!=typeof o||Array.isArray(o)||(l=[o,e]),0===n.length))return l;if(!o.hasOwnProperty(e)&&void 0===o[e])return;o=o[e]}if(void 0!==o)return o}catch(e){}},l=function(e){try{if("string"==typeof e&&e){if("true"===(e=e.trim()))return!0;if("false"===e)return!1;if(!isNaN(e))return Number(e);if("{"===e.substring(0,1)||"["===e.substring(0,1)){if("}"===e.slice(-1)||"]"===e.slice(-1))return JSON.parse(e)}else if("self."===e.substring(0,5)){let t=n.call(this,e);if(void 0!==t)return t}}}catch(e){}return e},o=function(e){return Function("self",'"use strict";return ('+e+")")(this)},i=function(e,t){let n=document.createElement(e);return n.innerHTML=t,n},r=function(e){return e instanceof HTMLElement||e instanceof Element||e instanceof DocumentFragment},f=function(e){return"function"==typeof e&&/^class\s/.test(Function.prototype.toString.call(e))},c=function(e){return j.element(e,this)},s=function(t,n){let l=null;for(let o=0;o<e.queue.length;o++)l=e.queue[o],l.type===t&&(e.queue[o]={},n(l))},u=function(t){(function(e){for(;e;){if(e===document.body)return!0;if(null===e.parentNode){if(!e.host)return!1;e=e.host}else e=e.parentNode}return!1})(t)&&(s("ready",(function(e){e.method()})),s("onload",(function(e){e.method()})),e.queue=[])},a=function(e){let t;if("function"==typeof e.val)t=e.val();else if("SELECT"===e.tagName&&e.getAttribute("multiple")){t=[];for(let n=0;n<e.options.length;n++)e.options[n].selected&&t.push(e.options[n].value)}else t="checkbox"===e.type?e.checked&&e.getAttribute("value")?e.value:e.checked:e.getAttribute("contenteditable")?e.innerHTML:e.value;return t},d=function(e){let t={},n=null,l=this.attributes;if(l&&l.length)for(let o=0;o<l.length;o++)n=l[o].name,e&&void 0!==this[n]?t[n]=this[n]:t[n]=l[o].value;return t},h=function(e){let i;if(i=e.bind?"value":e.a,e.loop)!function(e){let t=n.call(e.s,e.v);if(t){let n,l,o=[];if(t.length)for(let i=0;i<t.length;i++){let r=t[i].el;r||(n=e.e.lemonade,l=n.handler||c,m(t[i],"parent",e.s),r=j.render(l,e.r,t[i],n.template)),"false"===e.e.getAttribute("unique")&&m(t[i],"el",null),o.push(r)}for(;e.r.firstChild;)e.r.firstChild.remove();for(;n=o.shift();)e.r.appendChild(n)}}(e);else{let f;if(e.reference)f=l.call(e.s,e.v);else{let l,i=!1;f=e.v.replace(t,(function(t,r){return l=n.call(e.s,r),"function"==typeof l?l=l.call(e.s,e.e,t):void 0===l&&(l=o.call(e.s,r),void 0===l&&(l="")),"string"!=typeof l&&t===e.v&&(i=!0),l})),!0===i&&(f=l)}if(e.e.lemonade&&(e.e.lemonade.self[i]=f),e.protect&&e.e[i]===f)return;e.reference?e.e[i]=f:function(e,t,n){if("value"===n)if("function"==typeof e.val)e.val()!=t&&e.val(t);else if("SELECT"===e.tagName&&e.getAttribute("multiple"))for(let n=0;n<e.children.length;n++)e.children[n].selected=t.indexOf(e.children[n].value)>=0;else"checkbox"===e.type?e.checked=!(!t||"0"===t||"false"===t):"radio"===e.type?(e.checked=!1,e.value==t&&(e.checked=!0)):e.getAttribute&&e.getAttribute("contenteditable")?e.innerHTML!=t&&(e.innerHTML=t):(e.value=t,e.getAttribute&&null!==e.getAttribute("value")&&e.setAttribute("value",t));else"src"===n?(t||(t=e.getAttribute("default")),t&&e.setAttribute(n,t)):void 0!==e[n]||"function"==typeof t||"object"==typeof t?e[n]=t:r(e)?""===t?e.removeAttribute(n):e.setAttribute(n,t):e[n]=t}(e.e,f,i)}},p=function(t,n,l){let o=e.tracking.get(this);if(o){if(o=o[t],o)for(let e=0;e<o.length;e++)h(o[e]);"function"==typeof this.onchange&&this.onchange(t,o,this,n,l)}},m=function(e,t,n){"object"==typeof e&&Object.defineProperty(e,t,{enumerable:!1,configurable:!0,get:function(){return n}})},g=function(e){let t=this;if("object"==typeof t){let n=this[e];void 0===n&&(n=""),Object.defineProperty(t,e,{set:function(t){let l=n;n=t,p.call(this,e,l,t)},get:function(){return n},configurable:!0,enumerable:!0})}},y=function(t){if("string"==typeof t.v){let l=t.v.match(/self(\.\w+|\[\d+\])*/gm);if(l)for(let o=0;o<l.length;o++){let i=n.call(this,l[o],!0);if(i){let n=e.tracking.get(i[0]);n||(n={},e.tracking.set(i[0],n)),n[i[1]]||(n[i[1]]=[]),n[i[1]].push(t),g.call(i[0],i[1])}}}h(t)},b=function(e){"string"==typeof e.v&&e.v.match(t)&&y.call(this,e)},v=function(e,t,n){void 0===n&&(n=e.getAttribute(t).trim()),b.call(this,{e:e,a:t,v:n,s:this})},A=function(e,n){let l=e.textContent;if(l.match(t)){let t=l.split(/({{.*?}})/g);e.textContent="";for(let o=0;o<t.length;o++){if(l=t[o],l&&n&&n.__REF){let e=l.match(/__lm=(\d+)/);e&&e[1]&&(l=n.__REF[e[1]].v)}let i=document.createTextNode(l);e.appendChild(i),b.call(this,{e:i,a:"textContent",v:l,s:this})}}},C=function(t,l){let o,i=this,r=d.call(t),c=null,s=t.tagName;l&&(o=l[s]),o||(o=e.components[s]),"function"==typeof o&&(c=o),o&&(t instanceof HTMLUnknownElement?c||"ROOT"===s||console.error(s+" is not found."):console.log(s+" conflicts with a valid tag name"));let u=r[":loop"]||r["@loop"];if(c||u){let e={};c&&f(c)&&(e=new c(e)),t.lemonade={self:e,handler:c,template:t.innerHTML,loop:u},t.innerHTML=""}let h=Object.keys(r);if(h.length)for(let o=0;o<h.length;o++){let f=r[h[o]];if(l&&l.__REF){let e=f.match(/{{__lm=(\d+)}}/);e&&e[1]&&(f=l.__REF[e[1]].v)}let s=r[h[o]].replace("self.","");if("on"===h[o].substring(0,2))c?y.call(i,{e:t,a:h[o],v:f,s:i,reference:!0}):(t.removeAttribute(h[o]),t.addEventListener(h[o].substring(2),(e=>{if("function"!=typeof f){let e=n.call(i,s);e&&(f=e)}"function"==typeof f?f.call(t,e,i):Function("self","e",f).call(t,i,e)})));else{let l=h[o].substr(0,1);if("@"===l||":"===l){let l=h[o].substr(1),r={type:l};if("ready"===l){if("function"!=typeof f){let e=n.call(i,s);e&&(f=e)}r.method="function"==typeof f?f.bind(t,t,i):Function("self",f).bind(t,i)}else if("ref"===l)i[s]=t.lemonade&&t.lemonade.handler?t.lemonade.self:t;else if("bind"===l){if(y.call(i,{e:t,a:s,v:"{{"+f+"}}",s:i,bind:!0}),c){let e=t.lemonade.self;y.call(e,{e:i,a:s,v:"{{self.value}}",s:e,protect:!0})}else{let e=function(){let e=n.call(i,s,!0);e[0][e[1]]=a(this)};t.oninput=e}t[h[o]]=s}else if("loop"===l){let e=t;t.lemonade.handler&&(e=t.parentNode),y.call(i,{e:t,a:s,v:f,s:i,r:e,loop:!0})}else y.call(i,{e:t,a:l,v:f,s:i,reference:!0});e.queue.push(r),t.removeAttribute(h[o])}else r[h[o]]!==f&&("function"==typeof f||"object"==typeof f?(t[h[o]]=f,t.setAttribute(h[o],"")):t.setAttribute(h[o],f)),v.call(i,t,h[o])}}if(t.children&&t.children.length){o=[];for(let e=0;e<t.children.length;e++)o.push(t.children[e]);for(let e=0;e<o.length;e++)C.call(i,o[e],l)}else t.textContent&&A.call(i,t,l);if(o=t.lemonade,o&&o.handler&&!o.loop){let e=d.call(t,!0);j.setProperties.call(e,o.self),j.setProperties.call(o.self,e,!0),m(o.self,"parent",i),j.render(o.handler,t,o.self,o.template,!0,l)}},O=function(){let e=[],t=arguments,n=t[0].length-1;return[t[0].map(((l,o)=>o<n?(e.push({v:t[o+1]}),l+"{{__lm="+o+"}}"):l)).join(""),e]},j={render:function(e,t,l,o,i,c){let s=Array.from(arguments);if(!r(t))return console.error("Invalid DOM"),!1;if(c||(c={}),"function"==typeof e){if(f(e))void 0===l&&(l=new e({})),e=j.element(l.render(o),l,c);else if(void 0===l&&(l={}),"function"==typeof(e=e.call(l,o,c))){let t=e(O.bind({c:e,s:l}));c.__REF=t[1],e=j.element(t[0],l,c)}else"string"==typeof e&&(e=j.element(e,l,c));if(!r(e))return console.error("Invalid DOM return"),!1;e=e.firstChild}return"ROOT"===e.tagName?(e.root=Array.from(e.childNodes),e.rootChild=e.children[0],!0===i?(t.before(...e.childNodes),t.remove()):t.append(...e.childNodes)):(e.root=[e],e.rootChild=e,!0===i?(t.before(e),t.remove()):t.append(e)),m(l,"refresh",(function(t){if(void 0===t){let t;for(s[1]=e.rootChild,s[2]=this,s[4]=!0,j.render.apply(null,s);t=e.root.shift();)t.remove()}else{let e=n.call(this,t,!0);e&&p.call(e[0],e[1])}})),u(t),e.rootChild.lemon={self:l},e},element:function(t,n,l){let o,f;if(void 0===n&&(n={}),"object"==typeof l){let e=Object.keys(l);for(let t=0;t<e.length;t++)l[e[t].toUpperCase()]=l[e[t]]}if(r(t))o=t,f=o;else{if(t||(t=""),t=t.trim().replace(/(<(([A-Z]{1}|[a-z]*-){1}[a-zA-Z0-9_-]+)[^>]*)(\/|\/.{1})>/gm,"$1></$2>").replace(/<>/gi,"<root>").replace(/<\/>/gi,"</root>").trim(),o=i("template",t),o=o.content?o.content:i("div",t),o.childNodes.length>1)return console.error("Single root required"),null;f=o,o=o.firstChild}return C.call(n,o,l),m(n,"el",o),"function"==typeof n.onload&&e.queue.push({type:"onload",method:n.onload.bind(n,o)}),f}};return j.template=j.element,j.apply=function(e,t,n){j.element(e,t,n),u(e)},j.getProperties=function(e){let t={};for(let n in e)t[n]=this[n];return t},j.setProperties=function(e,t){for(let n in e)(this.hasOwnProperty(n)||t)&&(this[n]=e[n]);return this},j.resetProperties=function(e){for(let t in e)this[t]=""},j.get=function(t){return e.container[t]},j.set=function(t,n,l){if(e.container[t]=n,"function"==typeof n&&!0===l){e.container[t].storage=!0;let l=window.localStorage.getItem(t);l&&(l=JSON.parse(l),n(l))}},j.dispatch=function(t,n){let l=e.container[t];"function"==typeof l&&(l(n),!0===l.storage&&window.localStorage.setItem(t,JSON.stringify(n)))},j.setComponents=function(t){if("object"==typeof t){let n=Object.keys(t);for(let l=0;l<n.length;l++)e.components[n[l].toUpperCase()]=t[n[l]]}},j.component=class{constructor(e){e&&Object.assign(this,e)}},j.path=n,j.createWebComponent=function(e,t,n){if("function"!=typeof t)return"Handler should be an function";const l="lm-"+e;if(customElements.get(l))console.warn(`${l} is already defined.`);else{class e extends HTMLElement{constructor(){super()}connectedCallback(){if(void 0===this.el)if(n&&!0===n.applyOnly)t.call(this),j.apply(this,this);else{let e=this;n&&!0===n.shadowRoot&&(this.attachShadow({mode:"open"}),e=document.createElement("div"),this.shadowRoot.appendChild(e)),requestAnimationFrame((()=>{j.render(t,e,this)}))}requestAnimationFrame((()=>{"function"==typeof this.onconnect&&this.onconnect(!1)}))}}window.customElements.define(l,e)}},j}));